# 粒子語言AI助手 - 本地執行說明

## 📖 簡介

MRLiou 粒子語言核心系統是一個完整的邏輯運算框架，支援函數鏈執行、邏輯壓縮與記憶封存功能。本文件提供完整的本地安裝與執行指南。

## 🎯 系統需求

- **Python**: 3.10 或更高版本
- **作業系統**: Windows / macOS / Linux
- **記憶體**: 建議 2GB 以上
- **磁碟空間**: 100MB 以上

## 📦 安裝步驟

### 1. 下載專案

```bash
# 使用 Git 克隆專案
git clone https://github.com/dofaromg/flow-tasks.git
cd flow-tasks/particle_core

# 或直接下載 ZIP 檔案並解壓縮
```

### 2. 安裝依賴套件

```bash
# 安裝必要的 Python 套件
pip install -r requirements.txt

# 或手動安裝核心套件
pip install rich fastapi uvicorn
```

### 3. 驗證安裝

```bash
# 執行測試確認系統正常運作
python demo.py demo
```

## 🚀 快速開始

### 執行 CLI 互動介面

```bash
# 進入 particle_core 目錄
cd particle_core

# 啟動 CLI 模擬器
python src/cli_runner.py
```

CLI 介面提供以下功能：
1. **執行邏輯模擬** - 輸入資料並執行完整的邏輯鏈處理
2. **顯示函數鏈說明** - 查看五層函數鏈的詳細說明
3. **邏輯壓縮/解壓縮測試** - 測試 .flpkg 格式的壓縮與還原

### 執行邏輯管線

```bash
# 直接執行邏輯管線
python src/logic_pipeline.py
```

這將啟動互動式提示，讓您輸入資料並查看邏輯處理結果。

### 執行記憶封存系統

```bash
# 示範模式
python src/memory_archive_seed.py

# 互動模式
python src/memory_archive_seed.py interactive
```

記憶封存系統功能：
- 創建記憶種子
- 還原記憶種子
- 壓縮種子為 .flpkg 格式
- 合併多個種子
- 匯出/匯入種子

## 📚 核心功能說明

### 1. 函數鏈 (Function Chain)

標準的 MRLiou 邏輯鏈包含五個核心步驟：

```
STRUCTURE → MARK → FLOW → RECURSE → STORE
```

- **STRUCTURE**: 定義輸入資料結構
- **MARK**: 建立邏輯跳點標記
- **FLOW**: 轉換為流程結構節奏
- **RECURSE**: 遞歸展開為細部結構
- **STORE**: 封存至邏輯記憶模組

### 2. 邏輯壓縮 (.flpkg 格式)

完整的函數鏈可以壓縮為緊湊格式：

```
SEED(X) = STORE(RECURSE(FLOW(MARK(STRUCTURE(X)))))
```

### 3. 記憶封存種子

記憶封存系統支援：
- 創建可復原的記憶快照
- 生成唯一的校驗碼
- 支援合併與分享
- 自動版本控制

## 💡 使用範例

### Python 程式碼範例

```python
# 1. 基本邏輯管線
from logic_pipeline import LogicPipeline

pipeline = LogicPipeline()
result = pipeline.simulate("Hello, MRLiou!")
print(result['result'])
# 輸出: [STORE → [RECURSE → [FLOW → [MARK → [STRUCTURE → Hello, MRLiou!]]]]]

# 2. 壓縮與解壓縮
from rebuild_fn import FunctionRestorer

restorer = FunctionRestorer()
compressed = "SEED(X) = STORE(RECURSE(FLOW(MARK(STRUCTURE(X)))))"
steps = restorer.decompress_fn(compressed)
print(steps)
# 輸出: ['structure', 'mark', 'flow', 'recurse', 'store']

# 3. 記憶封存
from memory_archive_seed import MemoryArchiveSeed

archive = MemoryArchiveSeed()
result = archive.create_seed(
    particle_data="測試資料",
    seed_name="my_first_seed"
)
print(f"種子已創建: {result['seed_name']}")

# 還原種子
restored = archive.restore_seed("my_first_seed")
print(f"還原資料: {restored['particle_data']}")
```

### 命令列範例

```bash
# 執行完整示範
python demo.py all

# 執行效能測試
python demo.py performance

# 查看系統資訊
python demo.py info

# 測試壓縮還原
python src/rebuild_fn.py
```

## 📁 專案結構

```
particle_core/
├── src/
│   ├── logic_pipeline.py         # 邏輯管線核心引擎
│   ├── cli_runner.py             # CLI 互動介面
│   ├── rebuild_fn.py             # 壓縮還原系統
│   ├── logic_transformer.py      # 邏輯轉換工具
│   └── memory_archive_seed.py    # 記憶封存系統
├── config/
│   └── core_config.json          # 系統配置檔
├── examples/                      # 範例檔案
├── docs/
│   └── usage_guide.md            # 使用指南
├── demo.py                       # 綜合測試套件
├── README.md                     # 專案說明
└── requirements.txt              # 依賴套件清單
```

## 🔧 配置選項

系統配置位於 `config/core_config.json`，包含：

- 函數鏈定義
- 檔案格式設定
- 輸出配置
- 壓縮規則
- 記憶種子儲存路徑

## 🎯 進階用途

### 1. 自訂函數鏈

```python
from logic_transformer import LogicTransformer

transformer = LogicTransformer()
custom_chain = ["init", "process", "validate", "store"]
flpkg = transformer.compress_to_flpkg(custom_chain)
print(flpkg)
```

### 2. 批次處理

```python
pipeline = LogicPipeline()
data_list = ["資料1", "資料2", "資料3"]

for data in data_list:
    result = pipeline.simulate(data)
    filename = pipeline.store_result(data, result['result'])
    print(f"已處理並儲存: {filename}")
```

### 3. 記憶種子合併

```python
archive = MemoryArchiveSeed()

# 創建多個種子
archive.create_seed("資料A", seed_name="seed_a")
archive.create_seed("資料B", seed_name="seed_b")
archive.create_seed("資料C", seed_name="seed_c")

# 合併種子
result = archive.merge_seeds(
    seed_names=["seed_a", "seed_b", "seed_c"],
    merged_name="merged_abc"
)
print(f"已合併為: {result['seed_name']}")
```

## 🐛 疑難排解

### 問題：import 錯誤

**解決方案**：
```bash
# 確保在正確的目錄中執行
cd particle_core

# 或設定 PYTHONPATH
export PYTHONPATH=/path/to/flow-tasks:$PYTHONPATH
```

### 問題：rich 套件未安裝

**解決方案**：
```bash
pip install rich
```

### 問題：記憶種子檔案找不到

**解決方案**：
```bash
# 確認 memory_seeds 目錄存在
ls memory_seeds/

# 列出所有種子
python -c "from src.memory_archive_seed import MemoryArchiveSeed; print(MemoryArchiveSeed().list_seeds())"
```

## 📊 效能指標

根據測試結果：

- **邏輯模擬速度**: 100+ 次/秒
- **壓縮/解壓縮**: 150+ 次/秒
- **記憶種子創建**: 50+ 次/秒
- **檔案讀寫**: 完全支援 Unicode（中文）

## 🔐 資料安全

- 所有記憶種子都有 SHA-256 校驗碼
- 還原時自動驗證完整性
- 支援版本追蹤與時間戳記
- 可匯出為 JSON 格式進行備份

## 🌐 與 FlowAgent 整合

本系統已完全整合至 FlowAgent 任務系統：

```python
# 在 FlowAgent 中使用
from particle_core.src.logic_pipeline import LogicPipeline
from particle_core.src.memory_archive_seed import MemoryArchiveSeed

# 處理任務資料
pipeline = LogicPipeline()
task_result = pipeline.simulate(task_data)

# 封存任務記憶
archive = MemoryArchiveSeed()
archive.create_seed(
    particle_data=task_result,
    metadata={"task_id": task_id},
    seed_name=f"task_{task_id}_memory"
)
```

## 📖 延伸閱讀

- [使用指南](docs/usage_guide.md)
- [實作總結](../IMPLEMENTATION_SUMMARY.md)
- [粒子語言初步計劃](../點此下載：粒子語言初步計劃（含來回封存原則）.txt.txt)
- [FluinSeed 封存清單](../FluinSeed_CompleteArchive_20250719.manifest.txt)

## 🤝 貢獻與支援

- **專案**: https://github.com/dofaromg/flow-tasks
- **授權**: MRLiou All Rights Reserved
- **作者**: MRLiou / dofaromg

## 📝 版本記錄

- **v1.0** (2025-10-05): 
  - 完整的邏輯管線系統
  - CLI 互動介面
  - 記憶封存種子系統
  - 本地執行指南

## 🎉 開始使用

現在您已經準備好使用 MRLiou 粒子語言系統了！

```bash
# 快速啟動
cd particle_core
python src/cli_runner.py

# 或直接執行示範
python demo.py demo
```

祝您使用愉快！🚀
